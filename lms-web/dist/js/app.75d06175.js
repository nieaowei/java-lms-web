(function(t){function e(e){for(var s,n,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},o=[];function n(t){return r.p+"js/"+({pdfjsWorker:"pdfjsWorker"}[t]||t)+"."+{pdfjsWorker:"497f3fbe"}[t]+".js"}function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,s){a=i[t]=[e,s]}));e.push(a[2]=s);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=n(t);var c=new Error;o=function(e){l.onerror=l.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",c.name="ChunkLoadError",c.type=s,c.request=o,a[1](c)}i[t]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},"039a":function(t,e,a){"use strict";var s=a("7174"),i=a.n(s);i.a},"0447":function(t,e,a){},"0746":function(t,e,a){"use strict";var s=a("c109"),i=a.n(s);i.a},"0f4f":function(t,e,a){"use strict";var s=a("ad71"),i=a.n(s);i.a},1:function(t,e){},"1bf7":function(t,e,a){"use strict";var s=a("4881"),i=a.n(s);i.a},"1d00":function(t,e,a){},2:function(t,e){},"2d7b":function(t,e,a){"use strict";var s=a("d89f"),i=a.n(s);i.a},3:function(t,e){},"3f32":function(t,e,a){},4:function(t,e){},4881:function(t,e,a){},"4f94":function(t,e,a){},5427:function(t,e,a){"use strict";var s=a("1d00"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],n={name:"App"},r=n,l=(a("034f"),a("2877")),c=Object(l["a"])(r,i,o,!1,null,null,null),d=c.exports,u=a("8c4f"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-container"},[a("el-container",{staticClass:"outside-container",staticStyle:{height:"100%"}},[a("el-header",{attrs:{height:"80px"}},[t._v("学习管理系统")]),a("el-container",{staticClass:"midille-container"},[a("el-container",[a("el-aside",[a("el-card",{staticClass:"inside-card"},[a("el-avatar",{attrs:{size:100,fit:"fill",src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"}}),a("div",{staticStyle:{padding:"0px"}},[a("div",{staticClass:"bottom clearfix"},[t._v(" "+t._s(this.$store.state.MyProfile.profile["username"])+" ")])])],1),a("el-menu",{attrs:{"default-active":"1"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"1"},on:{click:function(e){t.test=!1}}},[a("i",{staticClass:"el-icon-menu"}),a("span",[t._v("我的课程")])]),a("el-menu-item",{attrs:{index:"2"}},[a("i",{staticClass:"el-icon-user"}),a("span",[t._v("个人资料")])]),a("el-menu-item",{attrs:{index:"3"}},[a("i",{staticClass:"el-icon-document-copy"}),a("span",[t._v("文档课程")])]),a("el-menu-item",{attrs:{index:"4"}},[a("i",{staticClass:"el-icon-video-camera"}),a("span",[t._v("视频课程")])]),a("el-menu-item",{attrs:{index:"5"}},[a("i",{staticClass:"el-icon-edit-outline"}),a("span",[t._v("在线考核")])]),a("el-menu-item",{attrs:{index:"6"}},[a("i",{staticClass:"el-icon-setting"}),a("span",[t._v("网站管理")])]),a("el-menu-item",{attrs:{index:"7"}},[a("i",{staticClass:"el-icon-back"}),a("span",[t._v("退出")])])],1)],1),a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.state.AppIndex.loading,expression:"this.$store.state.AppIndex.loading"}]},[a("keep-alive",[a(this.$store.state.AppIndex.currentView,{tag:"component"})],1)],1)],1),a("el-footer")],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.AppIndex.bottom.enable,expression:"this.$store.state.AppIndex.bottom.enable"}],attrs:{id:"entire-bottom"}},[100===this.$store.state.AppIndex.bottom.percent?a("el-progress",{attrs:{status:"success","text-inside":!0,"stroke-width":20,percentage:100}}):a("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:this.$store.state.AppIndex.bottom.percent}})],1)],1)},p=[],f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{attrs:{type:"border-card","tab-position":"right",stretch:!0},on:{"tab-click":t.handleClick}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("学习文档")]),a("el-row",{attrs:{gutter:10}},t._l(this.$store.state.MyClass.myDocs,(function(e){return a("el-col",{key:e.id,attrs:{xs:12,sm:10,md:8,lg:6,xl:4,offset:1}},[a("el-card",{staticClass:"data-card",attrs:{"body-style":{padding:"0px"}}},[a("el-image",{staticStyle:{width:"100%",height:"150px"},attrs:{src:e.cover,fit:"cover"}}),a("div",{staticStyle:{padding:"14px"}},[a("span",[t._v(t._s(e.name)+"("+t._s(e.dlid)+")")]),e.finished?a("el-progress",{attrs:{percentage:100,status:"success"}}):a("el-progress",{attrs:{percentage:Number(e.percent.toFixed(1))}}),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"}),e.finished?a("el-button",{staticClass:"button",attrs:{icon:"el-icon-circle-check",type:"success"}},[t._v("已完成 ")]):a("el-button",{staticClass:"button",attrs:{icon:"el-icon-right",type:"primary"},on:{click:function(a){return t.openDocStudy(e.name,e)}}},[t._v("继续学习 ")])],1)],1)],1)],1)})),1)],1),a("el-tab-pane",{attrs:{label:"学习视频"}},[a("el-row",{attrs:{gutter:10}},t._l(this.$store.state.MyClass.myVideos,(function(e){return a("el-col",{key:e.id,attrs:{xs:12,sm:10,md:8,lg:6,xl:4,offset:1}},[a("el-card",{staticClass:"data-card",attrs:{"body-style":{padding:"0px"}}},[a("el-image",{staticStyle:{width:"100%",height:"150px"},attrs:{src:e.cover,fit:"cover"}}),a("div",{staticStyle:{padding:"14px"}},[a("span",[t._v(t._s(e.name)+"("+t._s(e.vlid)+")")]),e.finished?a("el-progress",{attrs:{percentage:100,status:"success"}}):a("el-progress",{attrs:{percentage:Number(e.percent.toFixed(1))}}),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"}),e.finished?a("el-button",{staticClass:"button",attrs:{icon:"el-icon-circle-check",type:"success"}},[t._v("已完成 ")]):a("el-button",{staticClass:"button",attrs:{icon:"el-icon-right",type:"primary"},on:{click:function(a){return t.openVideoStudy(e.name,e)}}},[t._v("继续学习 ")])],1)],1)],1)],1)})),1)],1),a("el-tab-pane",{attrs:{label:"已完成考核"}},[a("el-row",{attrs:{gutter:10}},t._l(this.$store.state.MyClass.myTests,(function(e){return a("el-col",{key:e.id,attrs:{xs:12,sm:10,md:8,lg:6,xl:4,offset:1}},[a("el-card",{staticClass:"data-card",attrs:{"body-style":{padding:"0px"}}},[a("el-image",{staticStyle:{width:"100%",height:"150px"},attrs:{src:e.cover,fit:"cover"}}),a("div",{staticStyle:{padding:"14px"}},[a("span",[t._v(t._s(e.title)+"("+t._s(e.tiid)+")")]),a("div",{staticClass:"bottom clearfix"},[a("el-tag",{staticClass:"time"},[t._v("完成时间："+t._s(e.createtime.split(" ")[0]))]),a("br"),a("el-tag",[t._v("总 分："+t._s(e.sum))]),a("br"),a("el-tag",{attrs:{type:"success"}},[t._v("得 分："+t._s(e.grade))]),a("br")],1)])],1)],1)})),1)],1),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"0"},attrs:{title:t.studyWindow.title,visible:t.studyWindowEnable,width:"80%",center:""},on:{"update:visible":function(e){t.studyWindowEnable=e},open:function(e){return t.$store.commit("AppIndex/setBottomEnable",!0)},close:function(e){return t.$store.commit("AppIndex/setBottomEnable",!1)}}},[a(this.studyWindow.instance,{tag:"component"}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.studyWindowEnable=!1}}},[t._v("关 闭")])],1)],1)],1)},h=[],b=(a("a9e3"),a("b680"),a("d3b7"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pdf1"},[a("el-carousel",{staticStyle:{width:"100%"},attrs:{arrow:"always",loop:!1,"initial-index":0,height:"900px",type:"card",autoplay:!1}},t._l(this.$store.state.studyDoc.PdfPageNum,(function(e){return a("el-carousel-item",{key:e},[a("pdf",{staticStyle:{width:"90%",border:"black solid 1px"},attrs:{src:t.$store.state.studyDoc.PdfData,page:e}})],1)})),1)],1)}),g=[],v=a("858e"),y={name:"studyDoc",components:{pdf:v["a"]},data:function(){return{data1:this.$store.state.studyDoc.PdfData}},methods:{}},_=y,T=(a("8a33"),Object(l["a"])(_,b,g,!1,null,"ed16b450",null)),w=T.exports,x={NOTIFY_POS:"top-right",SERVER_OK:"服务器响应正常",SERVER_FAIL:"服务器响应失败",LOGIN_OK:"登录成功",LOGIN_FAIL:"登录失败",REGISTER_OK:"注册成功",REGISTER_FAIL:"注册失败",GET_CLASS_OK:"获取课程成功",GET_CLASS_FAIL:"获取课程失败",REDIRECT_LOGIN:"登录凭证过期或无效"},I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("video",{staticStyle:{width:"100%",height:"100%","object-fit":"fill"},attrs:{src:t.$store.state.studyVideo.VideoData,controls:""}})},$=[],E={name:"studyVideo"},D=E,O=(a("2d7b"),Object(l["a"])(D,I,$,!1,null,"1cf4bd74",null)),R=O.exports,L={name:"MyClass",components:{studyDoc:w},data:function(){return{loading:!1,studyWindowEnable:!1,studyWindow:{timer:null,instance:null,enable:!1,currentClass:"",title:""}}},watch:{studyWindowEnable:{handler:function(t){var e=this;console.log(t),!0===t&&(console.log("start Timer"),100!==this.$store.state.AppIndex.bottom.percent&&(this.studyWindow.instance===w?this.studyWindow.timer=setInterval((function(){console.log("doc exec timer"),e.$store.dispatch("MyClass/updateDuration",e.studyWindow.currentClass.dlid).then((function(t){console.log("update",t),e.$store.commit("AppIndex/setBottomPercent",t.percent)}),(function(t){console.log("update",t)})),100===e.$store.state.AppIndex.bottom.percent&&clearInterval(e.studyWindow.timer)}),10500):this.studyWindow.instance===R&&(this.studyWindow.timer=setInterval((function(){console.log("exec timer"),e.$store.dispatch("MyClass/updateVideoDuration",e.studyWindow.currentClass).then((function(t){console.log(t),e.$store.commit("AppIndex/setBottomPercent",t.percent)}),(function(t){})),100===e.$store.state.AppIndex.bottom.percent&&clearInterval(e.studyWindow.timer)}),10500))),console.log(t)),!1===t&&(console.log("clear timer"),clearInterval(this.studyWindow.timer),this.studyWindow.instance=null)},deep:!0}},methods:{openDocStudy:function(t,e){var a=this;console.log(e),this.studyWindow.instance=w,this.studyWindowEnable=!0,this.studyWindow.title=t,this.loading=!0,this.studyWindow.currentClass=e,this.$store.dispatch("studyDoc/loadPdfData",e.dlid).then((function(t){a.$notify({type:"success",message:t,position:x.NOTIFY_POS}),a.$store.commit("AppIndex/setBottomPercent",Number(e.percent.toFixed(1)))}),(function(t){t===x.REDIRECT_LOGIN&&a.$router.push("login"),a.$notify({type:"error",message:t,position:x.NOTIFY_POS})})).finally((function(){a.loading=!1}))},openVideoStudy:function(t,e){var a=this;console.log(e),this.studyWindow.instance=R,this.studyWindowEnable=!0,this.studyWindow["title"]=t,this.loading=!0,this.studyWindow.currentClass=e.vlid,this.$store.dispatch("studyVideo/loadVideoData",e.vlid).then((function(t){a.$notify({type:"success",message:t,position:x.NOTIFY_POS}),a.$store.commit("AppIndex/setBottomPercent",Number(e.percent.toFixed(1)))}),(function(t){t===x.REDIRECT_LOGIN&&a.$router.push("login"),a.$notify({type:"error",message:t,position:x.NOTIFY_POS})})).finally((function(){a.loading=!1}))},handleClick:function(t,e){}},created:function(){var t=this;this.$store.commit("AppIndex/changeLoading",!0),this.$store.dispatch("MyClass/getMyDocs").then((function(e){t.$notify({type:"success",message:e,position:x.NOTIFY_POS})}),(function(e){e===x.REDIRECT_LOGIN&&t.$router.push("login"),t.$notify({type:"error",message:e,position:x.NOTIFY_POS})})).finally((function(){t.$store.commit("AppIndex/changeLoading",!1)})),this.$store.dispatch("MyClass/getMyVideos").then((function(e){t.$notify({message:e,type:"success",position:x.NOTIFY_POS})}),(function(e){t.$notify({message:e,type:"error",position:x.NOTIFY_POS})})),this.$store.dispatch("MyClass/getMyTests").then((function(e){t.$notify({message:e,type:"success",position:x.NOTIFY_POS})}),(function(e){t.$notify({message:e,type:"error",position:x.NOTIFY_POS})}))}},C=L,P=(a("c592"),Object(l["a"])(C,f,h,!1,null,"353ba705",null)),S=P.exports,V={name:"AppIndex",data:function(){return{}},methods:{handleSelect:function(t,e){this.$store.commit("AppIndex/changeCurrentView",this.$store.state.AppIndex.menuViews[parseInt(t,10)-1])}},created:function(){this.$store.commit("AppIndex/changeCurrentView",S),this.$store.dispatch("MyProfile/getProfile")}},N=V,F=(a("5996"),Object(l["a"])(N,m,p,!1,null,"90479e3a",null)),k=F.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.state.Login.loading,expression:"this.$store.state.Login.loading"}],staticClass:"login-card",attrs:{shadow:"never"}},[a("el-form",{ref:"loginForm",staticClass:"login-container",attrs:{model:t.loginForm,"status-icon":!0,rules:t.rules,"label-width":"65px","label-position":"left"}},[a("h3",[t._v("用户登录")]),a("el-form-item",{attrs:{label:"账号：",prop:"username"}},[a("el-input",{attrs:{type:"text",autofocus:"",placeholder:"请输入用户名"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码","show-password":""},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),a("el-button",{on:{click:t.login}},[t._v("登录")])],1),a("div",{staticClass:"some-bt"},[a("el-button",{staticClass:"register-bt",attrs:{type:"text"},on:{click:t.jumpRegister}},[t._v("立即注册")])],1)],1)],1)},G=[],Y={name:"Login",data:function(){return{loginForm:{username:"",password:""},rules:{username:[{validator:this.$store.state.Login.checkUserName,trigger:"blur"}],password:[{validator:this.$store.state.Login.checkPass,trigger:"blur"}]},responseResult:[]}},methods:{login:function(){var t=this,e=!1;this.$refs["loginForm"].validate((function(t){e=t})),e&&this.$store.dispatch("Login/login",this.loginForm).then((function(e){t.$notify({message:e.msg,type:"success",position:x.NOTIFY_POS}),t.$store.commit("AppIndex/saveCurUserName",e.data),t.$router.push({name:"AppIndex"})}),(function(e){t.$notify({message:e,type:"error",position:x.NOTIFY_POS})}))},jumpRegister:function(){this.$router.push({name:"Register"})}}},M=Y,j=(a("039a"),Object(l["a"])(M,A,G,!1,null,null,null)),W=j.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.state.Register.loading,expression:"this.$store.state.Register.loading"}],staticClass:"register-card",attrs:{shadow:"never"}},[a("el-form",{ref:"registerForm",staticClass:"register-container",attrs:{model:t.registerForm,"status-icon":!0,rules:t.rules,"label-width":"100px","label-position":"left"}},[a("h3",[t._v("用户注册")]),a("el-form-item",{attrs:{label:"账号：",prop:"username",rules:[{required:!0,message:"账号不能为空"}]}},[a("el-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:t.registerForm.username,callback:function(e){t.$set(t.registerForm,"username",e)},expression:"registerForm.username"}})],1),a("el-form-item",{attrs:{label:"密码：",prop:"password",rules:[{required:!0,message:"密码不能为空"}]}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.registerForm.password,callback:function(e){t.$set(t.registerForm,"password",e)},expression:"registerForm.password"}})],1),a("el-form-item",{attrs:{label:"确认密码：",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:t.registerForm.checkPass,callback:function(e){t.$set(t.registerForm,"checkPass",e)},expression:"registerForm.checkPass"}})],1),a("el-form-item",{attrs:{label:"手机号码：",prop:"phonenum",rules:[{required:!0,message:"手机号码不能为空"},{type:"number",message:"手机号码格式不正确"}]}},[a("el-input",{attrs:{type:"text",placeholder:"请输入手机号码"},model:{value:t.registerForm.phonenum,callback:function(e){t.$set(t.registerForm,"phonenum",t._n(e))},expression:"registerForm.phonenum"}})],1),a("el-button",{on:{click:t.register}},[t._v("注册")])],1),a("div",{staticClass:"some-bt"},[a("el-button",{attrs:{type:"text"},on:{click:t.jumpLogin}},[t._v("立即登录")])],1)],1)},U=[],q={name:"Register",data:function(){return{registerForm:{username:"",password:"",checkPass:"",phonenum:""},rules:{checkPass:[{validator:this.$store.state.Register.checkTwoPass,trigger:"blur",required:!0}]},responseResult:[]}},methods:{register:function(){var t=this;this.$refs["registerForm"].validate((function(e){e&&t.$store.dispatch("Register/register",t.registerForm).then((function(e){t.$notify({title:e,type:"success",position:"top-left"}),t.$router.push({name:"Login"})}),(function(e){t.$notify({title:e,type:"error",position:"top-left"})}))}))},jumpLogin:function(){this.$router.push({path:"/login"}),console.log("跳转")}}},B=q,K=(a("d597"),Object(l["a"])(B,z,U,!1,null,"20bd4cbd",null)),J=K.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{attrs:{"tab-position":"right",type:"border-card"}},[a("el-tab-pane",{attrs:{label:"文档管理"}},[a(t.adminDoc,{tag:"component"})],1),a("el-tab-pane",{attrs:{label:"视频管理"}},[a(t.adminVideo,{tag:"component"})],1),a("el-tab-pane",{attrs:{label:"考核管理"}},[a(t.adminTest,{tag:"component"})],1)],1)},Q=[],X=(a("c975"),a("a434"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"z-index":"3",float:"right",position:"relative"}},[a("el-button",{staticStyle:{"margin-left":"5px"},on:{click:t.addNewTab}},[t._v("新增文档")]),a("el-input",{staticClass:"input-with-select",staticStyle:{"margin-left":"5px","margin-bottom":"1px",width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.searchContext,callback:function(e){t.searchContext=e},expression:"searchContext"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("el-tabs",{attrs:{type:"card"},on:{"tab-remove":t.removeTab,"tab-click":t.clickTab},model:{value:t.editableTabsValue,callback:function(e){t.editableTabsValue=e},expression:"editableTabsValue"}},[a("el-tab-pane",{attrs:{label:"文档查询"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.$store.state.adminDoc.docList,height:"520px"}},[a("el-table-column",{attrs:{fixed:"",prop:"dlid",label:"课程号"}}),a("el-table-column",{attrs:{prop:"name",label:"课程名"}}),a("el-table-column",{attrs:{prop:"duration",label:"课程时长"}}),a("el-table-column",{attrs:{prop:"username",label:"上传人"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"修改日期"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建日期"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.getDetail(e)}}},[t._v("详情")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.addEdit(e)}}},[t._v("编辑")]),a("el-popconfirm",{attrs:{title:"确定删除该课程吗？"},on:{onConfirm:function(a){return t.deleteDoc(e)}}},[a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[t._v(" 删除")])],1)]}}])})],1)],1),t._l(t.editableTabs,(function(e){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name,closable:""}},["newDoc"===e.type?a("div",{staticStyle:{"margin-left":"30%",width:"400px","text-align":"center"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"api/admin/uploadimage/","on-success":t.handleAvatarSuccess,"show-file-list":!1,"with-credentials":""}},[e.form.cover?a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.form.cover,fit:"fit"}}):a("div",[a("span",[t._v("封面图片")]),a("br"),a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1),a("el-form",{attrs:{"label-position":"left","label-width":"100px"},model:{value:e.form,callback:function(a){t.$set(e,"form",a)},expression:"item.form"}},[a("el-form-item",{attrs:{label:"封面图片："}},[a("el-input",{model:{value:e.form.cover,callback:function(a){t.$set(e.form,"cover",a)},expression:"item.form.cover"}})],1),a("el-form-item",{attrs:{label:"PDF文件："}},[a("el-input",{model:{value:e.form.path,callback:function(a){t.$set(e.form,"path",a)},expression:"item.form.path"}}),a("el-upload",{attrs:{"with-credentials":"",limit:1,"on-success":t.handlePdfSuccess,action:"api/admin/uploadpdf/","show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),a("el-form-item",{attrs:{label:"课程名："}},[a("el-input",{model:{value:e.form.name,callback:function(a){t.$set(e.form,"name",a)},expression:"item.form.name"}})],1),a("el-form-item",{attrs:{label:"学习时长："}},[a("el-input",{model:{value:e.form.duration,callback:function(a){t.$set(e.form,"duration",a)},expression:"item.form.duration"}})],1),"new"===e.action?a("el-button",{on:{click:function(a){return t.commit(e)}}},[t._v("提交")]):t._e(),"edit"===e.action?a("el-button",{on:{click:function(a){return t.updateDoc(e)}}},[t._v("提交")]):t._e()],1)],1):"newDetail"===e.type?a("div",[a("div",{staticStyle:{float:"left",width:"50%","text-align":"center"}},[a("div",{staticStyle:{width:"70%","margin-left":"10%"}},[e.data.cover?a("el-image",{staticStyle:{width:"100%",height:"200px",border:"#409EFF dashed 1px"},attrs:{src:e.data.cover,fit:"fit"}}):t._e(),a("el-form",{attrs:{"label-width":"100px",disabled:""}},[a("el-form-item",{attrs:{label:"封面地址："}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.data.cover,callback:function(a){t.$set(e.data,"cover",a)},expression:"item.data.cover"}})],1),a("el-form-item",{attrs:{label:"文件地址："}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.data.path,callback:function(a){t.$set(e.data,"path",a)},expression:"item.data.path"}})],1),a("el-form-item",{attrs:{label:"课程号："}},[a("span",[t._v(t._s(e.data.dlid))])]),a("el-form-item",{attrs:{label:"课程名："}},[a("span",[t._v(t._s(e.data.name))])]),a("el-form-item",{attrs:{label:"学习时长："}},[a("span",[t._v(t._s(e.data.duration))])]),a("el-form-item",{attrs:{label:"上传人："}},[a("span",[t._v(t._s(e.data.username))])]),a("el-form-item",{attrs:{label:"修改时间："}},[a("span",[t._v(t._s(e.data.updatetime))])]),a("el-form-item",{attrs:{label:"创建时间："}},[a("span",[t._v(t._s(e.data.createtime))])])],1)],1)]),a("div",{staticStyle:{float:"right",width:"50%","text-align":"left"}},[a("span",[t._v("已添加学习用户：")]),a("el-table",{attrs:{data:e.data.users}},[a("el-table-column",{attrs:{prop:"uiid",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}})],1)],1)]):t._e()])}))],2)],1)}),Z=[],tt=(a("4de4"),a("4160"),a("b0c0"),a("159b"),{name:"adminDoc",data:function(){return{searchContext:"",editableTabsValue:"0",editableTabs:[],tabIndex:0,curTab:0,imageUrl:""}},methods:{addEdit:function(t){var e=++this.tabIndex+"";this.editableTabs.push({title:"编辑文档",name:e,type:"newDoc",action:"edit",form:{dlid:t.row.dlid,name:t.row.name,cover:t.row.cover,path:t.row.path,duration:t.row.duration,createtime:t.row.createtime,updatetime:t.row.updatetime}}),this.curTab=this.editableTabs.length,this.editableTabsValue=e},updateDoc:function(t){var e=this;console.log(t),this.$store.dispatch("adminDoc/updateDoc",t.form).then((function(a){console.log("yes"),e.$notify({type:"success",message:a.msg,position:x.NOTIFY_POS}),e.removeTab(t.name),e.$store.commit("adminDoc/changeDoc",{dlid:t.form.dlid,newitem:a.data})}),(function(t){console.log(t),t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},deleteDoc:function(t){var e=this;this.$store.dispatch("adminDoc/deleteDoc",t.row).then((function(a){console.log("yes"),e.$notify({type:"success",message:a.msg,position:x.NOTIFY_POS}),e.$store.commit("adminDoc/removeDoc",t.$index)}),(function(t){console.log(t),t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},clickTab:function(t){console.log("click"),console.log(t.index),console.log(this.editableTabsValue),this.curTab=t.index},commit:function(t){var e=this;this.$store.dispatch("adminDoc/addDoc",t.form).then((function(a){e.$notify({type:"success",message:a.msg,position:x.NOTIFY_POS}),e.$store.commit("adminDoc/addDoc",a.data),e.removeTab(t.name)}),(function(t){t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},removeTab:function(t){var e=this,a=this.editableTabs,s=this.editableTabsValue;console.log("remove qian :",this.curTab),a.forEach((function(i,o){if(i.name===t)if(s===t){var n=a[o+1]||a[o-1];n&&(s=n.name,n===a[o+1]?e.curTab=o+1:e.curTab=o)}else e.curTab>o+1&&e.curTab--})),this.editableTabsValue=s,this.editableTabs=a.filter((function(e){return e.name!==t})),0===this.editableTabs.length&&(this.editableTabsValue="0",this.curTab=0),console.log("remove hou :",this.curTab)},addNewTab:function(){var t=++this.tabIndex+"";this.editableTabs.push({title:"新建文档",name:t,type:"newDoc",action:"new",form:{name:"",cover:"",path:"",duration:0}}),this.curTab=this.editableTabs.length,this.editableTabsValue=t,console.log("new tab :",this.curTab),console.log(this.tabIndex),console.log(this.editableTabsValue),console.log(this.editableTabs)},getDetail:function(t){var e=this;this.$store.dispatch("adminDoc/getDetail",t.row).then((function(t){e.$notify({type:"success",message:t.msg,position:x.NOTIFY_POS}),e.addNewDetail(t.data)}),(function(t){t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},addNewDetail:function(t){var e=++this.tabIndex+"";this.editableTabs.push({title:"文档详情",name:e,type:"newDetail",data:t}),this.curTab=this.editableTabs.length,this.editableTabsValue=e,console.log("new detail :",this.curTab),console.log(this.tabIndex),console.log(this.editableTabsValue),console.log(this.editableTabs)},handleAvatarSuccess:function(t,e){console.log(this.curTab),this.editableTabs[this.curTab-1].form.cover=t.data},handlePdfSuccess:function(t,e){console.log(this.curTab),this.editableTabs[this.curTab-1].form.path=t.data}},created:function(){var t=this;this.$store.dispatch("adminDoc/getDocList").then((function(e){t.$notify({type:"success",message:e,position:x.NOTIFY_POS})}),(function(e){e===x.REDIRECT_LOGIN&&t.$router.push("login"),t.$notify({type:"error",message:e,position:x.NOTIFY_POS})}))}}),et=tt,at=(a("1bf7"),Object(l["a"])(et,X,Z,!1,null,"d8f1c1da",null)),st=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"z-index":"3",float:"right",position:"relative"}},[a("el-button",{staticStyle:{"margin-left":"5px"},on:{click:t.addNewTab}},[t._v("新增视频")]),a("el-input",{staticClass:"input-with-select",staticStyle:{"margin-left":"5px","margin-bottom":"1px",width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.searchContext,callback:function(e){t.searchContext=e},expression:"searchContext"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("el-tabs",{attrs:{type:"card"},on:{"tab-remove":t.removeTab,"tab-click":t.clickTab},model:{value:t.editableTabsValue,callback:function(e){t.editableTabsValue=e},expression:"editableTabsValue"}},[a("el-tab-pane",{attrs:{label:"视频查询"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.$store.state.adminVideo.videoList,height:"520px"}},[a("el-table-column",{attrs:{fixed:"",prop:"vlid",label:"课程号"}}),a("el-table-column",{attrs:{prop:"name",label:"课程名"}}),a("el-table-column",{attrs:{prop:"duration",label:"课程时长"}}),a("el-table-column",{attrs:{prop:"username",label:"上传人"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"修改日期"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建日期"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.getDetail(e)}}},[t._v("详情")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.addEdit(e)}}},[t._v("编辑")]),a("el-popconfirm",{attrs:{title:"确定删除该课程吗？"},on:{onConfirm:function(a){return t.deleteVideo(e)}}},[a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[t._v(" 删除")])],1)]}}])})],1)],1),t._l(t.editableTabs,(function(e){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name,closable:""}},["newDoc"===e.type?a("div",{staticStyle:{"margin-left":"30%",width:"400px","text-align":"center"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","with-credentials":"",action:"api/admin/uploadimage/","on-success":t.handleAvatarSuccess,"show-file-list":!1}},[e.form.cover?a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.form.cover,fit:"fit"}}):a("div",[a("span",[t._v("封面图片")]),a("br"),a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1),a("el-form",{attrs:{"label-position":"left","label-width":"100px"},model:{value:e.form,callback:function(a){t.$set(e,"form",a)},expression:"item.form"}},[a("el-form-item",{attrs:{label:"封面图片："}},[a("el-input",{model:{value:e.form.cover,callback:function(a){t.$set(e.form,"cover",a)},expression:"item.form.cover"}})],1),a("el-form-item",{attrs:{label:"视频文件："}},[a("el-input",{model:{value:e.form.path,callback:function(a){t.$set(e.form,"path",a)},expression:"item.form.path"}}),a("el-upload",{attrs:{"with-credentials":"",action:"api/admin/uploadvideo/","on-success":t.handleVideoSuccess,limit:1,"show-file-list":!0}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),a("el-form-item",{attrs:{label:"课程名："}},[a("el-input",{model:{value:e.form.name,callback:function(a){t.$set(e.form,"name",a)},expression:"item.form.name"}})],1),a("el-form-item",{attrs:{label:"学习时长："}},[a("el-input",{model:{value:e.form.duration,callback:function(a){t.$set(e.form,"duration",a)},expression:"item.form.duration"}})],1),"new"===e.action?a("el-button",{on:{click:function(a){return t.commit(e)}}},[t._v("提交")]):t._e(),"edit"===e.action?a("el-button",{on:{click:function(a){return t.updateVideo(e)}}},[t._v("提交")]):t._e()],1)],1):"newDetail"===e.type?a("div",[a("div",{staticStyle:{float:"left",width:"50%","text-align":"center"}},[a("div",{staticStyle:{width:"70%","margin-left":"10%"}},[e.data.cover?a("el-image",{staticStyle:{width:"100%",height:"200px",border:"#409EFF dashed 1px"},attrs:{src:e.data.cover,fit:"fit"}}):t._e(),a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"封面地址："}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.data.cover,callback:function(a){t.$set(e.data,"cover",a)},expression:"item.data.cover"}})],1),a("el-form-item",{attrs:{label:"文件地址："}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.data.path,callback:function(a){t.$set(e.data,"path",a)},expression:"item.data.path"}})],1),a("el-form-item",{attrs:{label:"课程号："}},[a("span",[t._v(t._s(e.data.vlid))])]),a("el-form-item",{attrs:{label:"课程名："}},[a("span",[t._v(t._s(e.data.name))])]),a("el-form-item",{attrs:{label:"学习时长："}},[a("span",[t._v(t._s(e.data.duration))])]),a("el-form-item",{attrs:{label:"上传人："}},[a("span",[t._v(t._s(e.data.username))])]),a("el-form-item",{attrs:{label:"修改时间："}},[a("span",[t._v(t._s(e.data.updatetime))])]),a("el-form-item",{attrs:{label:"创建时间："}},[a("span",[t._v(t._s(e.data.createtime))])])],1)],1)]),a("div",{staticStyle:{float:"right",width:"50%","text-align":"left"}},[a("span",[t._v("已添加学习用户：")]),a("el-table",{attrs:{data:e.data.users}},[a("el-table-column",{attrs:{prop:"uiid",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}})],1)],1)]):t._e()])}))],2)],1)},ot=[],nt={name:"adminVideo",data:function(){return{searchContext:"",editableTabsValue:"0",editableTabs:[],tabIndex:0,curTab:0,imageUrl:""}},methods:{addEdit:function(t){console.log("addedit",t);var e=++this.tabIndex+"";this.editableTabs.push({title:"编辑视频",name:e,type:"newDoc",action:"edit",form:{vlid:t.row.vlid,name:t.row.name,cover:t.row.cover,path:t.row.path,createtime:t.row.createtime,updatetime:t.row.updatetime,duration:t.row.duration}}),this.curTab=this.editableTabs.length,this.editableTabsValue=e},updateVideo:function(t){var e=this;console.log(t),this.$store.dispatch("adminVideo/updateVideo",t.form).then((function(a){console.log("yes"),e.$notify({type:"success",message:a.msg,position:x.NOTIFY_POS}),console.log("update result",a),e.removeTab(t.name),e.$store.commit("adminVideo/changeVideo",{vlid:t.form.vlid,newitem:a.data})}),(function(t){console.log(t),t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},deleteVideo:function(t){var e=this;this.$store.dispatch("adminVideo/deleteVideo",t.row).then((function(a){console.log("yes"),e.$notify({type:"success",message:a.msg,position:x.NOTIFY_POS}),e.$store.commit("adminVideo/removeVideo",t.$index)}),(function(t){console.log(t),t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},clickTab:function(t){console.log("click"),console.log(t.index),console.log(this.editableTabsValue),this.curTab=t.index},commit:function(t){var e=this;this.$store.dispatch("adminVideo/addVideo",t.form).then((function(a){e.$notify({type:"success",message:a.msg,position:x.NOTIFY_POS}),e.$store.commit("adminVideo/addVideo",a.data),e.removeTab(t.name)}),(function(t){t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},removeTab:function(t){var e=this,a=this.editableTabs,s=this.editableTabsValue;console.log("remove qian :",this.curTab),a.forEach((function(i,o){if(i.name===t)if(s===t){var n=a[o+1]||a[o-1];n&&(s=n.name,n===a[o+1]?e.curTab=o+1:e.curTab=o)}else e.curTab>o+1&&e.curTab--})),this.editableTabsValue=s,this.editableTabs=a.filter((function(e){return e.name!==t})),0===this.editableTabs.length&&(this.editableTabsValue="0",this.curTab=0),console.log("remove hou :",this.curTab)},addNewTab:function(){var t=++this.tabIndex+"";this.editableTabs.push({title:"新建文档",name:t,type:"newDoc",action:"new",form:{name:"",cover:"",path:"",duration:0}}),this.curTab=this.editableTabs.length,this.editableTabsValue=t,console.log("new tab :",this.curTab),console.log(this.tabIndex),console.log(this.editableTabsValue),console.log(this.editableTabs)},getDetail:function(t){var e=this;this.$store.dispatch("adminVideo/getDetail",t.row).then((function(t){e.$notify({type:"success",message:t.msg,position:x.NOTIFY_POS}),e.addNewDetail(t.data)}),(function(t){t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},addNewDetail:function(t){var e=++this.tabIndex+"";this.editableTabs.push({title:"视频详情",name:e,type:"newDetail",data:t}),this.curTab=this.editableTabs.length,this.editableTabsValue=e,console.log("new detail :",this.curTab),console.log(this.tabIndex),console.log(this.editableTabsValue),console.log(this.editableTabs)},handleAvatarSuccess:function(t,e){console.log(this.curTab),this.editableTabs[this.curTab-1].form.cover=t.data},handleVideoSuccess:function(t,e){this.editableTabs[this.curTab-1].form.path=t.data}},created:function(){var t=this;this.$store.dispatch("adminVideo/getVideoList").then((function(e){t.$notify({type:"success",message:e,position:x.NOTIFY_POS})}),(function(e){e===x.REDIRECT_LOGIN&&t.$router.push("login"),t.$notify({type:"error",message:e,position:x.NOTIFY_POS})}))}},rt=nt,lt=(a("7c9d"),Object(l["a"])(rt,it,ot,!1,null,"1e7bfe14",null)),ct=lt.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"z-index":"3",float:"right",position:"relative"}},[a("el-button",{staticStyle:{"margin-left":"5px"},on:{click:t.addNewTab}},[t._v("新增试卷")]),a("el-input",{staticClass:"input-with-select",staticStyle:{"margin-left":"5px","margin-bottom":"1px",width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.searchContext,callback:function(e){t.searchContext=e},expression:"searchContext"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("el-tabs",{attrs:{type:"card"},on:{"tab-remove":t.removeTab,"tab-click":t.clickTab},model:{value:t.editableTabsValue,callback:function(e){t.editableTabsValue=e},expression:"editableTabsValue"}},[a("el-tab-pane",{attrs:{label:"试卷查询"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.$store.state.adminTest.testList,height:"520px"}},[a("el-table-column",{attrs:{fixed:"",prop:"tiid",label:"试卷号"}}),a("el-table-column",{attrs:{prop:"title",label:"试卷名"}}),a("el-table-column",{attrs:{prop:"num",label:"题数"}}),a("el-table-column",{attrs:{prop:"sum",label:"总分"}}),a("el-table-column",{attrs:{prop:"username",label:"上传人"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"修改日期"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建日期"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.getDetail(e)}}},[t._v("详情")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.addEdit(e)}}},[t._v("编辑")]),a("el-popconfirm",{attrs:{title:"确定删除该试卷吗？"},on:{onConfirm:function(a){return t.deleteDoc(e)}}},[a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[t._v(" 删除")])],1)]}}])})],1)],1),t._l(t.editableTabs,(function(e){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name,closable:""}},["newDoc"===e.type?a("div",{staticStyle:{"margin-left":"30%",width:"400px","text-align":"center"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"api/admin/uploadimage/","on-success":t.handleAvatarSuccess,"show-file-list":!1}},[e.form.cover?a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.form.cover,fit:"fit"}}):a("div",[a("span",[t._v("封面图片")]),a("br"),a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1),a("el-form",{attrs:{"label-position":"left","label-width":"100px"},model:{value:e.form,callback:function(a){t.$set(e,"form",a)},expression:"item.form"}},[a("el-form-item",{attrs:{label:"封面图片："}},[a("el-input",{model:{value:e.form.cover,callback:function(a){t.$set(e.form,"cover",a)},expression:"item.form.cover"}})],1),a("el-form-item",{attrs:{label:"试卷名："}},[a("el-input",{model:{value:e.form.title,callback:function(a){t.$set(e.form,"title",a)},expression:"item.form.title"}})],1),t._l(e.form.topics,(function(s,i){return a("el-form-item",{key:i,staticStyle:{border:"#409EFF dashed 1px",padding:"5px"},attrs:{label:"题目 "+(i+1)+"："}},[a("el-input",{attrs:{placeholder:"问题"},model:{value:s.question,callback:function(e){t.$set(s,"question",e)},expression:"topic.question"}},[t._v("问题")]),a("el-input",{attrs:{placeholder:"选项A"},model:{value:s.opa,callback:function(e){t.$set(s,"opa",e)},expression:"topic.opa"}}),a("el-input",{attrs:{placeholder:"选项B"},model:{value:s.opb,callback:function(e){t.$set(s,"opb",e)},expression:"topic.opb"}}),a("el-input",{attrs:{placeholder:"选项C"},model:{value:s.opc,callback:function(e){t.$set(s,"opc",e)},expression:"topic.opc"}}),a("el-input",{attrs:{placeholder:"选项D"},model:{value:s.opd,callback:function(e){t.$set(s,"opd",e)},expression:"topic.opd"}}),a("el-input",{attrs:{placeholder:"答案"},model:{value:s.answer,callback:function(e){t.$set(s,"answer",e)},expression:"topic.answer"}}),a("el-input",{attrs:{placeholder:"分数"},model:{value:s.score,callback:function(e){t.$set(s,"score",e)},expression:"topic.score"}}),a("el-button",{on:{click:function(a){return a.preventDefault(),t.removeTopic(e.form.topics,s)}}},[t._v("删除")])],1)})),a("el-button",{on:{click:function(a){return t.addTopic(e.form.topics)}}},[t._v("新增题目")]),"new"===e.action?a("el-button",{on:{click:function(a){return t.commit(e)}}},[t._v("提交")]):t._e(),"edit"===e.action?a("el-button",{on:{click:function(a){return t.updateDoc(e)}}},[t._v("提交")]):t._e()],2)],1):"newDetail"===e.type?a("div",[a("div",{staticStyle:{float:"left",width:"50%","text-align":"center"}},[a("div",{staticStyle:{width:"70%","margin-left":"10%"}},[e.data.cover?a("el-image",{staticStyle:{width:"100%",height:"200px",border:"#409EFF dashed 1px"},attrs:{src:e.data.cover,fit:"fit"}}):t._e(),a("el-form",{attrs:{"label-width":"100px",disabled:""}},[a("el-form-item",{attrs:{label:"封面地址："}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.data.cover,callback:function(a){t.$set(e.data,"cover",a)},expression:"item.data.cover"}})],1),a("el-form-item",{attrs:{label:"试卷号："}},[a("span",[t._v(t._s(e.data.tiid))])]),a("el-form-item",{attrs:{label:"试卷名："}},[a("span",[t._v(t._s(e.data.title))])]),a("el-form-item",{attrs:{label:"试卷总分："}},[a("span",[t._v(t._s(e.data.sum))])]),a("el-form-item",{attrs:{label:"试题总数："}},[a("span",[t._v(t._s(e.data.num))])]),a("el-form-item",{attrs:{label:"上传人："}},[a("span",[t._v(t._s(e.data.username))])]),a("el-form-item",{attrs:{label:"修改时间："}},[a("span",[t._v(t._s(e.data.updatetime))])]),a("el-form-item",{attrs:{label:"创建时间："}},[a("span",[t._v(t._s(e.data.createtime))])])],1)],1)]),a("div",{staticStyle:{float:"right",width:"50%","text-align":"left"}},[a("span",[t._v("已完成试卷用户：")]),a("el-table",{attrs:{data:e.data.users,height:"750px"}},[a("el-table-column",{attrs:{prop:"uiid",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}})],1)],1),a("div",{staticStyle:{width:"100%",float:"left"}},[a("el-divider",{staticStyle:{width:"100%",position:"relative"}},[t._v("题目列表")]),a("el-table",{attrs:{data:e.data.topics}},[a("el-table-column",{attrs:{prop:"tcid",label:"题目号"}}),a("el-table-column",{attrs:{prop:"question",label:"问题"}}),a("el-table-column",{attrs:{prop:"opa",label:"选项A"}}),a("el-table-column",{attrs:{prop:"opb",label:"选项B"}}),a("el-table-column",{attrs:{prop:"opc",label:"选项C"}}),a("el-table-column",{attrs:{prop:"opd",label:"选项D"}}),a("el-table-column",{attrs:{prop:"answer",label:"答案"}}),a("el-table-column",{attrs:{prop:"score",label:"分数"}})],1)],1)]):t._e()])}))],2)],1)},ut=[],mt={name:"adminTest",data:function(){return{searchContext:"",editableTabsValue:"0",editableTabs:[],tabIndex:0,curTab:0,imageUrl:""}},methods:{removeTopic:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},addTopic:function(t){t.push({question:"",opa:"",opb:"",opc:"",opd:"",score:"",answer:""})},addEdit:function(t){var e=this;this.$store.dispatch("adminTest/getDetail",t.row).then((function(a){var s=++e.tabIndex+"";e.editableTabs.push({title:"编辑试卷",name:s,type:"newDoc",action:"edit",form:{tiid:t.row.tiid,title:t.row.title,cover:t.row.cover,topics:a.data.topics,createtime:t.row.createtime,updatetime:t.row.updatetime}}),e.curTab=e.editableTabs.length,e.editableTabsValue=s}))},updateDoc:function(t){var e=this;console.log(t),this.$store.dispatch("adminTest/updateTest",t.form).then((function(a){console.log("yes"),e.$notify({type:"success",message:a.msg,position:x.NOTIFY_POS}),console.log("update result",a),e.removeTab(t.name),e.$store.commit("adminTest/changeTest",{tiid:a.data.tiid,newitem:a.data})}),(function(t){console.log(t),t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},deleteDoc:function(t){var e=this;this.$store.dispatch("adminTest/deleteTest",t.row).then((function(a){console.log("yes"),e.$notify({type:"success",message:a.msg,position:x.NOTIFY_POS}),e.$store.commit("adminTest/removeTest",t.$index)}),(function(t){console.log(t),t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},clickTab:function(t){console.log("click"),console.log(t.index),console.log(this.editableTabsValue),this.curTab=t.index},commit:function(t){var e=this;this.$store.dispatch("adminTest/addTest",t.form).then((function(a){e.$notify({type:"success",message:a.msg,position:x.NOTIFY_POS}),e.$store.commit("adminTest/addTest",a.data),e.removeTab(t.name)}),(function(t){t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},removeTab:function(t){var e=this,a=this.editableTabs,s=this.editableTabsValue;console.log("remove qian :",this.curTab),a.forEach((function(i,o){if(i.name===t)if(s===t){var n=a[o+1]||a[o-1];n&&(s=n.name,n===a[o+1]?e.curTab=o+1:e.curTab=o)}else e.curTab>o+1&&e.curTab--})),this.editableTabsValue=s,this.editableTabs=a.filter((function(e){return e.name!==t})),0===this.editableTabs.length&&(this.editableTabsValue="0",this.curTab=0),console.log("remove hou :",this.curTab)},addNewTab:function(){var t=++this.tabIndex+"";this.editableTabs.push({title:"新建试卷",name:t,type:"newDoc",action:"new",form:{title:"",cover:"",topics:[{question:"",opa:"",opb:"",opc:"",opd:"",score:"",answer:""}]}}),this.curTab=this.editableTabs.length,this.editableTabsValue=t,console.log("new tab :",this.curTab),console.log(this.tabIndex),console.log(this.editableTabsValue),console.log(this.editableTabs)},getDetail:function(t){var e=this;this.$store.dispatch("adminTest/getDetail",t.row).then((function(t){e.$notify({type:"success",message:t.msg,position:x.NOTIFY_POS}),e.addNewDetail(t.data)}),(function(t){t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))},addNewDetail:function(t){var e=++this.tabIndex+"";this.editableTabs.push({title:"试卷详情",name:e,type:"newDetail",data:t}),this.curTab=this.editableTabs.length,this.editableTabsValue=e,console.log("new detail :",this.curTab),console.log(this.tabIndex),console.log(this.editableTabsValue),console.log(this.editableTabs)},handleAvatarSuccess:function(t,e){console.log(this.curTab),this.editableTabs[this.curTab-1].form.cover=t.data}},created:function(){var t=this;this.$store.dispatch("adminTest/getTestList").then((function(e){t.$notify({type:"success",message:e,position:x.NOTIFY_POS})}),(function(e){e===x.REDIRECT_LOGIN&&t.$router.push("login"),t.$notify({type:"error",message:e,position:x.NOTIFY_POS})}))}},pt=mt,ft=(a("0746"),Object(l["a"])(pt,dt,ut,!1,null,"fe07f9fa",null)),ht=ft.exports,bt={name:"admin",data:function(){return{adminDoc:st,adminVideo:ct,adminTest:ht,dynamicValidateForm:{domains:[{value:""}],email:""}}},methods:{submitForm:function(t){this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;alert("submit!")}))},resetForm:function(t){this.$refs[t].resetFields()},removeDomain:function(t){var e=this.dynamicValidateForm.domains.indexOf(t);-1!==e&&this.dynamicValidateForm.domains.splice(e,1)},addDomain:function(){this.dynamicValidateForm.domains.push({value:"",key:Date.now()})}},created:function(){var t=this;this.$store.dispatch("adminDoc/getDocList").then((function(e){t.$notify({type:"success",message:e,position:x.NOTIFY_POS})}),(function(e){e===x.REDIRECT_LOGIN&&t.$router.push("login"),t.$notify({type:"error",message:e,position:x.NOTIFY_POS})}))}},gt=bt,vt=(a("c8b4"),Object(l["a"])(gt,H,Q,!1,null,null,null)),yt=vt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])},Tt=[],wt=(a("3ca3"),a("ddb0"),a("2b3d"),{name:"upload",data:function(){return{imageUrl:""}},methods:{handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a}}}),xt=wt,It=Object(l["a"])(xt,_t,Tt,!1,null,"2a98c1c2",null),$t=It.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{model:{value:t.testData,callback:function(e){t.testData=e},expression:"testData"}},[a("span",[t._v("共 "+t._s(this.$store.state.doTest.testData.sum)+" 分，共 "+t._s(this.$store.state.doTest.testData.num)+" 题")]),t._l(t.testData,(function(e,s){return a("el-form-item",{key:s},[a("span",[t._v(t._s(s+1)+". "+t._s(e.question)+"("+t._s(e.score)+"分)")]),a("br"),a("el-radio-group",{model:{value:e.answer,callback:function(a){t.$set(e,"answer",a)},expression:"item.answer"}},[a("el-radio",{attrs:{label:"1"}},[t._v("A."+t._s(e.opa))]),a("br"),a("el-radio",{attrs:{label:"2"}},[t._v("B."+t._s(e.opb))]),a("br"),a("el-radio",{attrs:{label:"3"}},[t._v("C."+t._s(e.opc))]),a("br"),a("el-radio",{attrs:{label:"4"}},[t._v("D."+t._s(e.opd))]),a("br")],1),a("br")],1)}))],2)],1)},Dt=[],Ot={name:"doTest",data:function(){return{}},computed:{testData:{get:function(){return console.log("获取信息"),this.$store.state.doTest.testData.topics},set:function(t){console.log("答案修改"),this.$store.commit("doTest/changeAnswer",t)}}},watch:{},methods:{},created:function(){}},Rt=Ot,Lt=Object(l["a"])(Rt,Et,Dt,!1,null,"3e07e1f0",null),Ct=Lt.exports;s["default"].use(u["a"]);var Pt=new u["a"]({mode:"history",routes:[{name:"Login",path:"/login",component:W},{name:"AppIndex",path:"/index",component:k},{name:"Register",path:"/register",component:J},{name:"studyDoc",path:"/studyDoc",component:w},{path:"/src/assets"},{name:"studyVideo",path:"/studyVideo",component:R},{name:"admin",path:"/admin",component:yt},{name:"upload",path:"/upload",component:$t},{name:"dotest",path:"/dotest",component:Ct}]}),St=a("5c96"),Vt=a.n(St),Nt=(a("0fae"),a("2f62")),Ft=a("bc3a"),kt=a.n(Ft),At={namespaced:!0,state:{myDocs:{},myVideos:{},myTests:{}},getters:{},mutations:{saveMyDocs:function(t,e){t.myDocs=e},saveMyVideos:function(t,e){t.myVideos=e},addMyDoc:function(t,e){t.myDocs.unshift(e)},addMyVideo:function(t,e){t.myVideos.unshift(e)},changeMyDocPercent:function(t,e){var a=e.key,s=e.data;t.myDocs.forEach((function(t){t.dlid!==a||(t.percent=s)}))},changeMyVideoPercent:function(t,e){var a=e.key,s=e.data;t.myVideos[a].percent=s},saveMyTests:function(t,e){t.myTests=e},addMyTest:function(t,e){t.myTests.unshift(e)}},actions:{getMyDocs:function(t){var e=t.commit;t.state;return new Promise((function(t,a){kt.a.get("api/user/doc/record",{timeout:3e3}).then((function(s){200===s.data.status&&(e("saveMyDocs",s.data.data),t(s.data.msg)),a(s.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},updateDuration:function(t,e){var a=t.commit,s=t.state;return console.log(s.myDocs),new Promise((function(t,s){kt.a.post("api/user/doc/update",{dlid:e}).then((function(i){console.log("suc",i),200===i.data.status&&(a("changeMyDocPercent",{key:e,data:i.data.data.percent}),t(i.data.data)),s(i.data.msg)})).catch((function(t){console.log("fail ",t),302===t.response.status&&s(x.REDIRECT_LOGIN),s(x.SERVER_FAIL)}))}))},getMyVideos:function(t){var e=t.commit;return new Promise((function(t,a){kt.a.get("api/user/video/record",{timeout:3e3}).then((function(s){200===s.data.status&&(e("saveMyVideos",s.data.data),t(s.data.msg)),a(s.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},updateVideoDuration:function(t,e){var a=t.commit;return new Promise((function(t,s){kt.a.post("api/user/video/update",{vlid:e}).then((function(i){200===i.data.status&&(a("changeMyVideoPercent",{key:e,data:i.data.data.percent}),t(i.data.data)),s(i.data.msg)})).catch((function(t){302===t.response.status&&s(x.REDIRECT_LOGIN),s(x.SERVER_FAIL)}))}))},getMyTests:function(t){var e=t.commit;return new Promise((function(t,a){kt.a.get("api/user/test/record",{timeout:3e3}).then((function(s){200===s.data.status&&(e("saveMyTests",s.data.data),t(s.data.msg)),a(s.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))}}},Gt=At,Yt={namespaced:!0,state:{loading:!1,checkUserName:function(t,e,a){if(!e)return a(new Error("账号不能为空"));a()},checkPass:function(t,e,a){if(!e)return a(new Error("密码不能为空"));a()}},getters:{},mutations:{alterLoading:function(t,e){t.loading=e}},actions:{login:function(t,e){var a=t.commit;return a("alterLoading",!0),new Promise((function(t,a){kt.a.post("api/user/login",{username:e.username,password:e.password},{timeout:1e4}).then((function(e){200===e.data["status"]&&t(e.data),a(e.data["msg"])})).catch((function(){a(x.SERVER_FAIL)}))})).finally((function(){a("alterLoading",!1)}))}}},Mt=Yt,jt=void 0,Wt={namespaced:!0,state:{loading:!0,checkTwoPass:function(t,e,a){e?e!==jt.registerForm.password?a(new Error("两次输入密码不一致!")):a():a(new Error("请再次输入密码"))}},getters:{},mutations:{changeLoading:function(t,e){t.loading=e}},actions:{register:function(t,e){var a=t.commit;return a("changeLoading",!0),new Promise((function(t,a){kt.a.post("api/user/register",{username:e.username,password:e.password,phonenum:e.phonenum},{timeout:3e3}).then((function(e){200===e.data["status"]&&t(e.data["msg"]),a(e.data["msg"])})).catch((function(){a(x.SERVER_FAIL)}))})).finally((function(){a("changeLoading",!1)}))}}},zt=Wt,Ut={namespaced:!0,state:{profile:{}},getters:{},mutations:{saveProfile:function(t,e){t.profile=e}},actions:{getProfile:function(t){var e=t.commit;return new Promise((function(t,a){kt.a.get("api/user/profile",{timeout:3e3}).then((function(s){200===s.data["status"]&&(e("saveProfile",s.data["data"]),t(s.data["msg"])),a(s.data["msg"])})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},changeMyPd:function(t,e){t.commit;var a=e.newVal,s=e.oldVal;return console.log(s,a),new Promise((function(t,e){kt.a.post("api/user/changepd",{newpassword:a,oldpassword:s},{timeout:3e3}).then((function(a){200===a.data["status"]&&t(a.data),e(a.data["msg"])})).catch((function(t){302===t.response.status&&e(x.REDIRECT_LOGIN),e(x.SERVER_FAIL)}))}))}}},qt=Ut,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{attrs:{"tab-position":"right",stretch:!0,type:"border-card"}},[a("el-tab-pane",{attrs:{label:"基本信息"}},[a("el-divider"),a("span",[t._v("用户ID："+t._s(this.$store.state.MyProfile.profile["uiid"]))]),a("el-divider"),a("span",[t._v("用户名："+t._s(this.$store.state.MyProfile.profile["username"]))]),a("el-divider"),a("span",[t._v("手机号码："+t._s(this.$store.state.MyProfile.profile["phonenum"]))]),a("el-divider"),a("span",[t._v("注册时间："+t._s(this.$store.state.MyProfile.profile["createtime"]))]),a("el-divider"),a("span",[t._v("上一次修改信息时间："+t._s(this.$store.state.MyProfile.profile["updatetime"]))]),a("el-divider")],1),a("el-tab-pane",{attrs:{label:"修改密码"}},[a("el-steps",{staticStyle:{"margin-top":"100px"},attrs:{active:t.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"验证旧密码"}}),a("el-step",{attrs:{title:"输入新密码"}}),a("el-step",{attrs:{title:"修改成功"}})],1),a("div",[0===t.active?a("el-input",{staticStyle:{padding:"10%"},attrs:{type:"text",label:"旧密码：",placeholder:"请输入旧密码"},model:{value:t.oldPd,callback:function(e){t.oldPd=e},expression:"oldPd"}}):1===t.active?a("el-input",{staticStyle:{padding:"10%"},attrs:{type:"text",label:"新密码：",placeholder:"请输入新密码"},model:{value:t.newPd,callback:function(e){t.newPd=e},expression:"newPd"}}):a("span",[t._v("修改成功")])],1),t.active<2?a("el-button",{staticStyle:{"margin-bottom":"12px"},on:{click:t.nextStep}},[t._v("下一步")]):a("el-button",{staticStyle:{"margin-bottom":"12px"},on:{click:t.nextStep}},[t._v("完成")])],1)],1)},Kt=[],Jt={name:"MyProfile",data:function(){var t=this,e=function(e,a,s){a?a!==t.registerForm.password?s(new Error("两次输入密码不一致!")):s():s(new Error("请再次输入密码"))};return{active:0,newPd:"",oldPd:"",registerForm:{username:"",password:"",checkPass:"",phonenum:""},rules:{checkPass:[{validator:e,trigger:"blur",required:!0}]},responseResult:[]}},methods:{nextStep:function(){var t=this;this.active++>2&&(this.active=0),2===this.active&&this.$store.dispatch("MyProfile/changeMyPd",{newVal:this.newPd,oldVal:this.oldPd}).then((function(e){t.$notify({type:"success",message:e.msg,position:x.NOTIFY_POS}),t.active=3}),(function(e){e===x.REDIRECT_LOGIN&&t.$router.push("login"),t.$notify({type:"error",message:e,position:x.NOTIFY_POS}),t.active=0})).finally((function(){t.newPd="",t.oldPd=""}))}},created:function(){var t=this;this.$store.commit("AppIndex/changeLoading",!0),this.$store.dispatch("MyProfile/getProfile").then((function(e){t.$notify({type:"success",message:e,position:x.NOTIFY_POS})}),(function(e){e===x.REDIRECT_LOGIN&&t.$router.push("login"),t.$notify({type:"error",message:e,position:x.NOTIFY_POS})})).finally((function(){t.$store.commit("AppIndex/changeLoading",!1)}))}},Ht=Jt,Qt=(a("ce20"),Object(l["a"])(Ht,Bt,Kt,!1,null,"4c2a8eb2",null)),Xt=Qt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{attrs:{type:"border-card",stretch:!0}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v("文档课程")]),a("el-row",{attrs:{gutter:10}},t._l(this.$store.state.DocClass.docList,(function(e,s){return a("el-col",{key:s,attrs:{xs:12,sm:10,md:8,lg:6,xl:4,offset:1}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("el-image",{staticStyle:{width:"100%",height:"150px"},attrs:{src:e.cover,fit:"cover"}}),a("div",{staticStyle:{padding:"14px"}},[a("span",[t._v(t._s(e.name)+"("+t._s(e.dlid)+")")]),a("div",{staticClass:"bottom clearfix"},[a("span",{staticClass:"time"},[t._v("上传人: "+t._s(e.username))]),a("br"),a("span",{staticClass:"time"},[t._v("学习时长: "+t._s((e.duration/60).toFixed(2))+"分钟")]),a("br"),a("time",{staticClass:"time"},[t._v("创建时间: "+t._s(e.createtime))]),a("br")]),e.flag?a("el-button",{staticClass:"button",attrs:{icon:"el-icon-circle-check",type:"success"}},[t._v("已添加 ")]):a("el-button",{staticClass:"button",attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:function(e){return t.addDocLearn(s)}}},[t._v("添加学习 ")])],1)],1)],1)})),1)],1)],1)},te=[],ee={name:"DocClass",computed:{},methods:{addDocLearn:function(t){var e=this;this.$store.dispatch("DocClass/addDocLearn",t).then((function(t){e.$notify({type:"success",message:t.msg,position:x.NOTIFY_POS}),e.$store.commit("MyClass/addMyDoc",t.data)}),(function(t){t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})})).finally((function(){}))}},created:function(){var t=this;this.$store.commit("AppIndex/changeLoading",!0),this.$store.dispatch("DocClass/getDocList").then((function(e){t.$notify({type:"success",message:e,position:x.NOTIFY_POS})}),(function(e){e===x.REDIRECT_LOGIN&&t.$router.push("login"),t.$notify({type:"error",message:e,position:x.NOTIFY_POS})})).finally((function(){t.$store.commit("AppIndex/changeLoading",!1)}))}},ae=ee,se=(a("5427"),Object(l["a"])(ae,Zt,te,!1,null,"0d96f4b3",null)),ie=se.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{attrs:{type:"border-card",stretch:!0}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-video-camera"}),t._v(" 视频课程")]),a("el-row",{attrs:{gutter:10}},t._l(this.$store.state.VideoClass.videoList,(function(e,s){return a("el-col",{key:s,attrs:{xs:12,sm:10,md:8,lg:6,xl:4,offset:1}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("el-image",{staticStyle:{width:"100%",height:"150px"},attrs:{src:e.cover,fit:"cover"}}),a("div",{staticStyle:{padding:"14px"}},[a("span",[t._v(t._s(e.name)+"("+t._s(e.vlid)+")")]),a("div",{staticClass:"bottom clearfix"},[a("span",{staticClass:"time"},[t._v("上传人: "+t._s(e.username))]),a("br"),a("span",{staticClass:"time"},[t._v("学习时长: "+t._s((e.duration/60).toFixed(2))+"分钟")]),a("br"),a("time",{staticClass:"time"},[t._v("创建时间: "+t._s(e.createtime))]),a("br")]),e.flag?a("el-button",{staticClass:"button",attrs:{icon:"el-icon-circle-check",type:"success"}},[t._v("已添加 ")]):a("el-button",{staticClass:"button",attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:function(e){return t.addVideoRecord(s)}}},[t._v("添加学习 ")])],1)],1)],1)})),1)],1)],1)},ne=[],re={name:"VideoClass",computed:{},methods:{addVideoRecord:function(t){var e=this;this.$store.dispatch("VideoClass/addVideoLearn",t).then((function(t){e.$notify({type:"success",message:t.msg,position:x.NOTIFY_POS}),e.$store.commit("MyClass/addMyVideo",t.data)}),(function(t){t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})})).finally((function(){}))}},created:function(){var t=this;this.$store.commit("AppIndex/changeLoading",!0),this.$store.dispatch("VideoClass/getVideoList").then((function(e){t.$notify({type:"success",message:e,position:x.NOTIFY_POS})}),(function(e){e===x.REDIRECT_LOGIN&&t.$router.push("login"),t.$notify({type:"error",message:e,position:x.NOTIFY_POS})})).finally((function(){t.$store.commit("AppIndex/changeLoading",!1)}))}},le=re,ce=(a("0f4f"),Object(l["a"])(le,oe,ne,!1,null,"2ef752c4",null)),de=ce.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{attrs:{type:"border-card",stretch:!0}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v("试卷列表")]),a("el-row",{attrs:{gutter:10}},t._l(this.$store.state.Test.testList,(function(e,s){return a("el-col",{key:s,attrs:{xs:12,sm:10,md:8,lg:6,xl:4,offset:1}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("el-image",{staticStyle:{width:"100%",height:"150px"},attrs:{src:e.cover,fit:"cover"}}),a("div",{staticStyle:{padding:"14px"}},[a("span",[t._v(t._s(e.title)+"("+t._s(e.tiid)+")")]),a("div",{staticClass:"bottom clearfix"},[a("span",{staticClass:"time"},[t._v("上传人: "+t._s(e.username))]),a("br"),a("span",{staticClass:"time"},[t._v("题数: "+t._s(e.num)+" 题")]),a("br"),a("span",{staticClass:"time"},[t._v("总分: "+t._s(e.sum)+" 分")]),a("br"),a("time",{staticClass:"time"},[t._v("创建时间: "+t._s(e.createtime))]),a("br")]),e.flag?a("el-button",{staticClass:"button",attrs:{icon:"el-icon-circle-check",type:"success"}},[t._v("已完成 ")]):a("el-button",{staticClass:"button",attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:function(e){return t.doTest(s)}}},[t._v("开始答题 ")])],1)],1)],1)})),1)],1),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"this.loading"}],staticStyle:{"margin-top":"0"},attrs:{title:t.studyWindow.title,visible:t.studyWindowEnable,width:"60%",center:""},on:{"update:visible":function(e){t.studyWindowEnable=e}}},[a(t.studyWindow.instance,{tag:"component"}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.commit}},[t._v("提 交")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.studyWindowEnable=!1}}},[t._v("关 闭")])],1)],1)],1)},me=[],pe={name:"Test",data:function(){return{loading:!1,studyWindowEnable:!1,studyWindow:{instance:Ct,enable:!1,currentClass:"",title:""}}},watch:{studyWindowEnable:{handler:function(t){!1===t&&this.$store.commit("doTest/saveTestData",{})}}},computed:{},methods:{commit:function(){var t=this;console.log(this.$store.getters["doTest/filterTestData"]),this.$store.dispatch("doTest/postTestData").then((function(e){t.$notify({type:"success",message:e.msg,position:x.NOTIFY_POS}),t.$store.commit("Test/changeTestFlag",{key:e.data.tiid,data:!0}),t.$store.commit("MyClass/addMyTest",e.data),t.studyWindowEnable=!1}),(function(e){e===x.REDIRECT_LOGIN&&t.$router.push("login"),t.$notify({type:"error",message:e,position:x.NOTIFY_POS})}))},doTest:function(t){var e=this;this.studyWindowEnable=!0,this.studyWindow.title=this.$store.state.Test.testList[t].title,this.$store.dispatch("doTest/getTestData",this.$store.state.Test.testList[t].tiid).then((function(t){e.$notify({type:"success",message:t.msg,position:x.NOTIFY_POS}),e.$store.commit("doTest/saveTestData",t.data)}),(function(t){t===x.REDIRECT_LOGIN&&e.$router.push("login"),e.$notify({type:"error",message:t,position:x.NOTIFY_POS})}))}},created:function(){var t=this;this.$store.commit("AppIndex/changeLoading",!0),this.$store.dispatch("Test/getTestList").then((function(e){t.$notify({type:"success",message:e,position:x.NOTIFY_POS})}),(function(e){e===x.REDIRECT_LOGIN&&t.$router.push("login"),t.$notify({type:"error",message:e,position:x.NOTIFY_POS})})).finally((function(){t.$store.commit("AppIndex/changeLoading",!1)}))}},fe=pe,he=(a("e829"),Object(l["a"])(fe,ue,me,!1,null,"49e17e00",null)),be=he.exports,ge={namespaced:!0,state:{loading:!1,currentUsername:"",currentView:S,menuViews:[S,Xt,ie,de,be,yt],classes:[],bottom:{enable:!1,percent:0,status:"success"}},getters:{},mutations:{saveCurUserName:function(t,e){t.currentUsername=e},setBottomEnable:function(t,e){t.bottom.enable=e},setBottomPercent:function(t,e){t.bottom.percent=e,t.bottom.percent,t.status="success"},saveClasses:function(t,e){t.classes=e},changeCurrentView:function(t,e){t.currentView=e},changeLoading:function(t,e){t.loading=e}},actions:{}},ve=ge,ye={namespaced:!0,state:{docList:{}},getters:{},mutations:{saveDocList:function(t,e){t.docList=e},changeDocFlag:function(t,e){var a=e.key,s=e.data;t.docList[a].flag=s},changeDoc:function(t,e){var a=e.key,i=e.data;s["default"].$set(t.docList,a,i),console.log(t.docList)}},actions:{getDocList:function(t){var e=t.commit;return new Promise((function(t,a){kt.a.get("api/doc/all/person",{timeout:3e3}).then((function(s){200===s.data["status"]&&(e("saveDocList",s.data["data"]),t(s.data["msg"])),a(s.data["msg"])})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},addDocLearn:function(t,e){var a=t.commit,s=t.state;return new Promise((function(t,i){kt.a.post("api/user/doc/addRecord",{dlid:s.docList[e].dlid},{timeout:3e3}).then((function(s){200===s.data.status&&(a("changeDocFlag",{key:e,data:!0}),t(s.data)),i(s.data.msg)})).catch((function(t){302===t.response.status&&i(x.REDIRECT_LOGIN),i(x.SERVER_FAIL)}))}))}}},_e=ye,Te={namespaced:!0,state:{PdfData:"",PdfPageNum:0},mutations:{savePdfData:function(t,e){t.PdfData=e},savePdfPageNum:function(t,e){t.PdfPageNum=e}},actions:{loadPdfData:function(t,e){var a=t.commit;return new Promise((function(t,s){kt.a.get("api/doc/getpath?dlid="+e,{timeout:3e3}).then((function(e){if(200===e.data.status){var i=v["a"].createLoadingTask(e.data.data);i.then((function(e){a("savePdfData",i),a("savePdfPageNum",e.numPages),t("文档获取成功")})).catch((function(t){console.log(t),a("savePdfData",""),a("savePdfPageNum",0),s("文档获取失败")}))}else a("savePdfData",""),a("savePdfPageNum",0),s("文档获取失败")})).catch((function(t){302===t.response.status&&s(x.REDIRECT_LOGIN),s(x.SERVER_FAIL)}))}))}}},we=Te,xe={namespaced:!0,state:{videoList:{}},getters:{},mutations:{saveVideoList:function(t,e){t.videoList=e},changeVideoFlag:function(t,e){var a=e.key,s=e.data;t.videoList[a].flag=s}},actions:{getVideoList:function(t){var e=t.commit;return new Promise((function(t,a){kt.a.get("api/video/all/person",{timeout:3e3}).then((function(s){200===s.data["status"]&&(e("saveVideoList",s.data["data"]),t(s.data["msg"])),a(s.data["msg"])})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},addVideoLearn:function(t,e){var a=t.commit,s=t.state;return new Promise((function(t,i){kt.a.post("api/user/video/addRecord",{vlid:s.videoList[e].vlid},{timeout:3e3}).then((function(s){200===s.data.status&&(a("changeVideoFlag",{key:e,data:!0}),t(s.data)),i(s.data.msg)})).catch((function(t){302===t.response.status&&i(x.REDIRECT_LOGIN),i(x.SERVER_FAIL)}))}))}}},Ie=xe,$e={namespaced:!0,state:{VideoData:""},mutations:{saveVideoData:function(t,e){t.VideoData=e},savePdfPageNum:function(t,e){t.PdfPageNum=e}},actions:{loadVideoData:function(t,e){var a=t.commit;return new Promise((function(t,s){kt.a.get("api/video/getpath?vlid="+e,{timeout:3e3}).then((function(e){200===e.data.status?(t(e.data.msg),a("saveVideoData",e.data.data)):(a("saveVideoData",""),s(e.data.msg))})).catch((function(t){302===t.response.status&&s(x.REDIRECT_LOGIN),s(x.SERVER_FAIL)}))}))}}},Ee=$e,De={namespaced:!0,state:{docList:[]},mutations:{saveDocList:function(t,e){t.docList=e},addDoc:function(t,e){t.docList.unshift(e)},removeDoc:function(t,e){t.docList.splice(e,1)},changeDoc:function(t,e){var a=e.dlid,s=e.newitem;t.docList.forEach((function(e,i){e.dlid!==a||t.docList.splice(i,1,s)}))}},actions:{getDocList:function(t){var e=t.commit;return new Promise((function(t,a){kt.a.get("api/admin/doc/all",{timeout:3e3}).then((function(s){200===s.data.status&&(e("saveDocList",s.data.data),t(s.data.msg)),a(s.data.msg)})).catch((function(t){a(t)}))}))},addDoc:function(t,e){t.commit;return new Promise((function(t,a){kt.a.post("api/admin/doc/add",{cover:e.cover,path:e.path,name:e.name,duration:e.duration},{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},getDetail:function(t,e){t.commit;return new Promise((function(t,a){kt.a.get("api/admin/doc/getone?dlid="+e.dlid,{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},deleteDoc:function(t,e){t.commit;return new Promise((function(t,a){kt.a.get("api/admin/doc/deleteone?dlid="+e.dlid,{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},updateDoc:function(t,e){t.commit;return new Promise((function(t,a){kt.a.post("api/admin/doc/updateone",{dlid:e.dlid,path:e.path,cover:e.cover,name:e.name,duration:e.duration,createtime:e.createtime,updatetime:e.updatetime},{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))}}},Oe=De,Re={namespaced:!0,state:{videoList:[]},mutations:{saveVideoList:function(t,e){t.videoList=e},addVideo:function(t,e){t.videoList.unshift(e)},removeVideo:function(t,e){t.videoList.splice(e,1)},changeVideo:function(t,e){var a=e.vlid,s=e.newitem;console.log("change",a),console.log("changenew",s),t.videoList.forEach((function(e,i){e.vlid!==a||t.videoList.splice(i,1,s)}))}},actions:{getVideoList:function(t){var e=t.commit;return new Promise((function(t,a){kt.a.get("api/admin/video/all",{timeout:3e3}).then((function(s){200===s.data.status&&(e("saveVideoList",s.data.data),t(s.data.msg)),a(s.data.msg)})).catch((function(t){a(t)}))}))},addVideo:function(t,e){t.commit;return new Promise((function(t,a){kt.a.post("api/admin/video/add",{cover:e.cover,path:e.path,name:e.name,duration:e.duration},{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},getDetail:function(t,e){t.commit;return new Promise((function(t,a){kt.a.get("api/admin/video/getone?vlid="+e.vlid,{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},deleteVideo:function(t,e){t.commit;return new Promise((function(t,a){kt.a.get("api/admin/video/deleteone?vlid="+e.vlid,{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},updateVideo:function(t,e){t.commit;return console.log(e),new Promise((function(t,a){kt.a.post("api/admin/video/updateone",{vlid:e.vlid,path:e.path,cover:e.cover,name:e.name,duration:e.duration,createtime:e.createtime,updatetime:e.updatetime},{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))}}},Le=Re,Ce={namespaced:!0,state:{testList:{}},getters:{},mutations:{saveTestList:function(t,e){t.testList=e},changeTestFlag:function(t,e){var a=e.key,s=e.data;t.testList.forEach((function(t){t.tiid!==a||(t.flag=s)}))},changeTest:function(t,e){var a=e.key,i=e.data;s["default"].$set(t.testList,a,i),console.log(t.testList)}},actions:{getTestList:function(t){var e=t.commit;return new Promise((function(t,a){kt.a.get("api/test/all/person",{timeout:3e3}).then((function(s){200===s.data["status"]&&(e("saveTestList",s.data["data"]),t(s.data["msg"])),a(s.data["msg"])})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))}}},Pe=Ce,Se=(a("d81d"),{namespaced:!0,state:{testData:{}},getters:{filterTestData:function(t){return t.testData.topics.filter((function(t){return!0})).map((function(t){return{answer:t.answer,tcid:t.tcid}}))}},mutations:{saveTestData:function(t,e){t.testData=e},changeAnswer:function(t,e){t.testData.topics.answer=e}},actions:{getTestData:function(t,e){t.commit,t.state;return new Promise((function(t,a){kt.a.get("api/test/getone?tiid="+e,{timeout:3e3}).then((function(e){200===e.data["status"]&&t(e.data),a(e.data["msg"])})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},postTestData:function(t,e){t.commit;var a=t.state,s=t.getters;return new Promise((function(t,e){kt.a.post("api/user/test/postone",{tiid:a.testData.tiid,topics:s.filterTestData}).then((function(a){200===a.data["status"]&&t(a.data),e(a.data["msg"])})).catch((function(t){302===t.response.status&&e(x.REDIRECT_LOGIN),e(x.SERVER_FAIL)}))}))}}}),Ve=Se,Ne={namespaced:!0,state:{testList:[]},mutations:{saveTestList:function(t,e){t.testList=e},addTest:function(t,e){t.testList.unshift(e)},removeTest:function(t,e){t.testList.splice(e,1)},changeTest:function(t,e){var a=e.tiid,s=e.newitem;t.testList.forEach((function(e,i){e.tiid!==a||t.testList.splice(i,1,s)}))}},actions:{getTestList:function(t){var e=t.commit;return new Promise((function(t,a){kt.a.get("api/admin/test/all",{timeout:3e3}).then((function(s){200===s.data.status&&(e("saveTestList",s.data.data),t(s.data.msg)),a(s.data.msg)})).catch((function(t){a(t)}))}))},addTest:function(t,e){t.commit;return new Promise((function(t,a){kt.a.post("api/admin/test/add",{title:e.title,cover:e.cover,topics:e.topics},{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},getDetail:function(t,e){t.commit;return new Promise((function(t,a){kt.a.get("api/admin/test/getone?tiid="+e.tiid,{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},deleteTest:function(t,e){t.commit;return new Promise((function(t,a){kt.a.get("api/admin/test/deleteone?tiid="+e.tiid,{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))},updateTest:function(t,e){t.commit;return new Promise((function(t,a){kt.a.post("api/admin/test/updateone",{tiid:e.tiid,cover:e.cover,title:e.title,topics:e.topics,createtime:e.createtime,updatetime:e.updatetime},{timeout:3e3}).then((function(e){200===e.data.status&&t(e.data),a(e.data.msg)})).catch((function(t){302===t.response.status&&a(x.REDIRECT_LOGIN),a(x.SERVER_FAIL)}))}))}}},Fe=Ne;s["default"].use(Nt["a"]);var ke=new Nt["a"].Store({modules:{MyClass:Gt,Login:Mt,Register:zt,MyProfile:qt,AppIndex:ve,DocClass:_e,studyDoc:we,studyVideo:Ee,VideoClass:Ie,adminDoc:Oe,adminVideo:Le,adminTest:Fe,Test:Pe,doTest:Ve},state:{},mutations:{},actions:{successNotify:function(t,e,a){t.commit;e.$notify({type:"success",message:a})},failNotify:function(t,e,a){t.commit;e.$notify({type:"error",message:a})}}}),Ae=ke,Ge=a("bc3a");s["default"].prototype.$axios=Ge,s["default"].config.productionTip=!1,s["default"].use(Vt.a),Ge.defaults.withCredentials=!0,Ge.defaults.headers["Content-Type"]="application/json",Ge.defaults.headers["Access-Control-Allow-Origin"]="https://jsonplaceholder.typicode.com",Ge.defaults.headers["Access-Control-Allow-Credentials"]="true",new s["default"]({el:"#app",store:Ae,router:Pt,render:function(t){return t(d)},comonents:{App:d},template:"<App/>"}).$mount("#app")},5996:function(t,e,a){"use strict";var s=a("c65c"),i=a.n(s);i.a},"68bf":function(t,e,a){},"6b99":function(t,e,a){},7174:function(t,e,a){},"7c9d":function(t,e,a){"use strict";var s=a("6b99"),i=a.n(s);i.a},"85ec":function(t,e,a){},"8a33":function(t,e,a){"use strict";var s=a("3f32"),i=a.n(s);i.a},"9f23":function(t,e,a){},ad71:function(t,e,a){},b118:function(t,e,a){},c109:function(t,e,a){},c592:function(t,e,a){"use strict";var s=a("4f94"),i=a.n(s);i.a},c65c:function(t,e,a){},c8b4:function(t,e,a){"use strict";var s=a("9f23"),i=a.n(s);i.a},ce20:function(t,e,a){"use strict";var s=a("b118"),i=a.n(s);i.a},d597:function(t,e,a){"use strict";var s=a("68bf"),i=a.n(s);i.a},d89f:function(t,e,a){},e829:function(t,e,a){"use strict";var s=a("0447"),i=a.n(s);i.a}});
//# sourceMappingURL=app.75d06175.js.map